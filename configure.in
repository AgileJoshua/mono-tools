AC_INIT(README)
AC_CANONICAL_SYSTEM
AM_INIT_AUTOMAKE(mono-tools, 0.99)
AM_MAINTAINER_MODE

AC_PROG_INSTALL

dnl C# compiler
AC_PATH_PROG(MCS, mcs, no)

CS="C#"
if test "x$MCS" = "xno"  ; then
	dnl AC_MSG_ERROR([You need to install a C# compiler])
	AC_MSG_ERROR([No $CS compiler found])
fi

dnl monoresgen
AC_PATH_PROG(MONORESGEN, monoresgen, no)
if test "x$MONORESGEN" = "xno"  ; then
	AC_MSG_ERROR([monoresgen not found in $PATH])
fi

AC_SUBST(MCS)
AC_SUBST(MONORESGEN)

PKG_CHECK_MODULES(NUNIT, mono-nunit)
AC_SUBST(NUNIT_LIBS)

PKG_CHECK_MODULES(GTK_SHARP, glade-sharp-2.0 gnome-sharp-2.0 gconf-sharp-2.0 gtkhtml-sharp-2.0, enable_gtks=yes, enable_gtks=no)
if test "x$enable_gtks" = "xno" ; then
	PKG_CHECK_MODULES(GTK_SHARP, glade-sharp gnome-sharp gconf-sharp gtkhtml-sharp, enable_gtks=yes, enable_gtks=no)
	if test "x$enable_gtks" = "xno" ; then
		AC_MSG_ERROR([gtk-sharp not found])
	fi
fi
AC_SUBST(GTK_SHARP_LIBS)

dnl Intl
GETTEXT_PACKAGE=mono-tools
AC_SUBST(GETTEXT_PACKAGE)
AC_DEFINE_UNQUOTED(GETTEXT_PACKAGE,"$GETTEXT_PACKAGE", [Gettext package])
ALL_LINGUAS="da es fr ca pt_BR"
AM_GLIB_GNU_GETTEXT

AC_OUTPUT([
Makefile
gnunit/Makefile
gnunit/art/Makefile
gnunit/src/Makefile
gnunit/src/AssemblyInfo.cs
gnunit/src/catalog.cs
monodoc-browser/Makefile
po/Makefile.in
])

echo "---"
echo "Configuration summary"
echo ""
echo "   * Installation prefix = $prefix"
echo ""
